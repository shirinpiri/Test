@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using perfumedecant.Models.Domains;
@using perfumedecant.Models.Repository;
@model perfumedecant.Models.Domains.Tbl_Perfume

@{
    PD_DB db = new PD_DB();
    Rep_Perfume rep_perfume = new Rep_Perfume();
    Rep_Season rep_season = new Rep_Season();
    var newWomen = rep_perfume.Get_NewPerfume("زنانه");
    var newUniSex = rep_perfume.Get_NewPerfume("یونیسکس");
    var newMen = rep_perfume.Get_NewPerfume("مردانه");
    var newSeason = rep_season.Get_SeasonPerfumes();
    var allNewPerfume = rep_perfume.Get_NewPerfume();
    int newCount = newWomen.Count() + newMen.Count() + newSeason.Count() + newUniSex.Count();
    Rep_PerfumeImages rep_images = new Rep_PerfumeImages();
}
<div class="slider-area">
    <div class="slider-active owl-carousel nav-style-1">
        <div class="single-slider-2 slider-height-1 d-flex align-items-center slider-height-res bg-img" style="background-image:url(/Content/Images/slider/A.png);">
        </div>
        <div class="single-slider-2 slider-height-1 d-flex align-items-center slider-height-res bg-img" style="background-image:url(/Content/Images/slider/B.png);">
        </div>
        <div class="single-slider-2 slider-height-1 d-flex align-items-center slider-height-res bg-img" style="background-image:url(/Content/Images/slider/C.png);">
        </div>
        <div class="single-slider-2 slider-height-1 d-flex align-items-center slider-height-res bg-img" style="background-image:url(/Content/Images/slider/D.png);">
        </div>
    </div>
</div>
<div class="suppoer-area pt-100 pb-60">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="support-wrap-2 mb-30 text-center">
                    <div class="support-content-2">
                        <img class="animated" src="Content/Images/icon-img/support-1.png" alt="">
                        <h5>ارسال رایگان</h5>
                        <p>برای خریدهای بالای 500 هزار تومان ارسال رایگان است.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="support-wrap-2 mb-30 support-shape text-center">
                    <div class="support-content-2">
                        <img class="animated" src="Content/Images/icon-img/support-3.png" alt="">
                        <h5>تضمین دائمی اصالت کالا</h5>
                        <p> گروه پرفیوم دکانت اصالت کالای خریداری شده را به صورت دائمی تضمین می کند و اگر کالا غیر اصل باشد می توانید کالا را پس فرستاده و تمام وجه پرداخت شده را با کمال احترام دریافت کنید </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="support-wrap-2 mb-30 support-shape text-center">
                    <div class="support-content-2">
                        <img class="animated" src="Content/Images/icon-img/support-2.png" alt="">
                        <h5>پشتیبانی شبانه روزی</h5>
                        <p>ما مفتخریم که در تمام طول هفته و  تمام طول روز پاسخگوی نیاز مشتریان عزیز هستیم.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="product-area pb-60">
    <div class="container">
        <div class="tab-filter-wrap mb-60">
            <div class="product-tab-list nav">

                <a class="active" href="#product-1" data-toggle="tab">
                    <h4>جدیدترین زنانه </h4>
                </a>
                <a href="#product-2" data-toggle="tab">
                    <h4>جدیدترین مردانه </h4>
                </a>
                <a href="#product-3" data-toggle="tab">
                    <h4> جدیدترین یونیسکس </h4>
                </a>
                <a href="#product-4" data-toggle="tab">
                    <h4> عطر مناسب فصل </h4>
                </a>

            </div>
            <div class="filter-active">
                <a href="#"> فیلتر <i class="fa fa-plus"></i></a>
            </div>
        </div>
        <div class="product-filter-wrapper">
            <div class="row">
                <!-- Product Filter -->
                <div class="col-md-3 col-sm-6 col-xs-12 mb-30">
                    <div class="product-filter">
                        <h5>مناسب فصل</h5>
                        <ul class="sort-by">
                            <li><input type="checkbox" name="season" value="بهار"> <a href="#">بهار</a></li>
                            <li><input type="checkbox" name="season" value="تابستان"> <a href="#">تابستان</a></li>
                            <li><input type="checkbox" name="season" value="پاییز"> <a href="#">پاییز</a></li>
                            <li><input type="checkbox" name="season" value="زمستان"> <a href="#">زمستان</a></li>
                        </ul>
                    </div>
                </div>
                <!-- Product Filter -->
                <div class="col-md-3 col-sm-6 col-xs-12 mb-30">
                    <div class="product-filter">
                        <h5>گروه بویایی</h5>
                        <ul class="color-filter">
                            <li><input type="checkbox" name="OlfactionGroup" value="شرقی"> <a href="#">شرقی</a></li>
                            <li><input type="checkbox" name="OlfactionGroup" value="گلی"> <a href="#">گلی</a></li>
                            <li><input type="checkbox" name="OlfactionGroup" value="مرکباتی"> <a href="#">مرکباتی</a></li>
                            <li><input type="checkbox" name="OlfactionGroup" value="میوه ای"> <a href="#">میوه ای</a></li>
                            <li><input type="checkbox" name="OlfactionGroup" value="گل میوه ای"> <a href="#">گل میوه ای</a></li>
                            <li><input type="checkbox" name="OlfactionGroup" value="چوبی"> <a href="#">چوبی</a></li>
                        </ul>
                    </div>
                </div>
                <!-- Product Filter -->
                <div class="col-md-3 col-sm-6 col-xs-12 mb-30">
                    <div class="product-filter">
                        <h5>طبع و رایحه</h5>
                        <ul class="product-tags">
                            <li><input type="checkbox" name="TemperOfPerfume" value="گرم"><a href="#">گرم</a></li>
                            <li><input type="checkbox" name="TemperOfPerfume" value="ملایم"><a href="#">ملایم</a></li>
                            <li><input type="checkbox" name="TemperOfPerfume" value="خنک"><a href="#">خنک</a></li>
                        </ul>
                    </div>
                </div>
                <!-- gender Filter -->
                <div class="col-md-3 col-sm-6 col-xs-12 mb-30">
                    <div class="product-filter">
                        <h5>جنسیت</h5>
                        <ul class="gender-filter">
                            <li><input class="gender" type="radio" id="male" name="gender" value="مردانه"><a href="#">مردانه</a></li>
                            <li><input class="gender" type="radio" id="female" name="gender" value="زنانه"><a href="#">زنانه</a></li>
                            <li><input class="gender" type="radio" id="unisex" name="gender" value="یونیسکس"><a href="#">یونیسکس</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="product-filter">
                    <h5>برند (حرف اول برند مورد نظر را انتخاب کنید )</h5>
                </div>
            </div>
            <div class="row">
                <div class="product-tab-list-2 nav">
                    <a href="#brand-A" data-toggle="tab" onclick="FindBrands('A','a')">
                        <h4> A </h4>
                    </a>
                    <a href="#brand-B" data-toggle="tab" onclick="FindBrands('B','b')">
                        <h4> B </h4>
                    </a>
                    <a href="#brand-C" data-toggle="tab" onclick="FindBrands('C','c')">
                        <h4> C </h4>
                    </a>
                    <a href="#brand-D" data-toggle="tab" onclick="FindBrands('D','d')">
                        <h4> D </h4>
                    </a>
                    <a href="#brand-E" data-toggle="tab" onclick="FindBrands('E','e')">
                        <h4> E </h4>
                    </a>
                    <a href="#brand-F" data-toggle="tab" onclick="FindBrands('F','f')">
                        <h4> F </h4>
                    </a>
                    <a href="#brand-G" data-toggle="tab" onclick="FindBrands('G','g')">
                        <h4> G </h4>
                    </a>
                    <a href="#brand-H" data-toggle="tab" onclick="FindBrands('H','h')">
                        <h4> H </h4>
                    </a>
                    <a href="#brand-I" data-toggle="tab" onclick="FindBrands('I','i')">
                        <h4> I </h4>
                    </a>
                    <a href="#brand-J" data-toggle="tab" onclick="FindBrands('J','j')">
                        <h4> J </h4>
                    </a>
                    <a href="#brand-K" data-toggle="tab" onclick="FindBrands('K','k')">
                        <h4> K </h4>
                    </a>
                    <a href="#brand-L" data-toggle="tab" onclick="FindBrands('L','l')">
                        <h4> L </h4>
                    </a>
                    <a href="#brand-M" data-toggle="tab" onclick="FindBrands('M','m')">
                        <h4> M </h4>
                    </a>
                    <a href="#brand-N" data-toggle="tab" onclick="FindBrands('N','n')">
                        <h4> N </h4>
                    </a>
                    <a href="#brand-O" data-toggle="tab" onclick="FindBrands('O','o')">
                        <h4> O </h4>
                    </a>
                    <a href="#brand-P" data-toggle="tab" onclick="FindBrands('P','p')">
                        <h4> P </h4>
                    </a>
                    <a href="#brand-Q" data-toggle="tab" onclick="FindBrands('Q','q')">
                        <h4> Q </h4>
                    </a>
                    <a href="#brand-R" data-toggle="tab" onclick="FindBrands('R','r')">
                        <h4> R </h4>
                    </a>
                    <a href="#brand-Z" data-toggle="tab" onclick="FindBrands('S','s')">
                        <h4> S </h4>
                    </a>
                    <a href="#brand-T" data-toggle="tab" onclick="FindBrands('T','t')">
                        <h4> T </h4>
                    </a>
                    <a href="#brand-U" data-toggle="tab" onclick="FindBrands('U','u')">
                        <h4> U </h4>
                    </a>
                    <a href="#brand-V" data-toggle="tab" onclick="FindBrands('V','v')">
                        <h4> V </h4>
                    </a>
                    <a href="#brand-W" data-toggle="tab" onclick="FindBrands('W','w')">
                        <h4> W </h4>
                    </a>
                    <a href="#brand-X" data-toggle="tab" onclick="FindBrands('X','x')">
                        <h4> X </h4>
                    </a>
                    <a href="#brand-Y" data-toggle="tab" onclick="FindBrands('Y','y')">
                        <h4> Y </h4>
                    </a>
                    <a href="#brand-Z" data-toggle="tab" onclick="FindBrands('Z','z')">
                        <h4> Z </h4>
                    </a>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="tab-content jump" id="brand-tabs">
                        <div class="tab-pane" id="brand-A">
                        </div>
                        <div class="tab-pane" id="brand-B">
                        </div>
                        <div class="tab-pane" id="brand-C">
                        </div>
                        <div class="tab-pane" id="brand-D">
                        </div>
                        <div class="tab-pane" id="brand-E">
                        </div>
                        <div class="tab-pane" id="brand-F">
                        </div>
                        <div class="tab-pane" id="brand-G">
                        </div>
                        <div class="tab-pane" id="brand-H">
                        </div>
                        <div class="tab-pane" id="brand-I">
                        </div>
                        <div class="tab-pane" id="brand-J">
                        </div>
                        <div class="tab-pane" id="brand-K">
                        </div>
                        <div class="tab-pane" id="brand-L">
                        </div>
                        <div class="tab-pane" id="brand-M">
                        </div>
                        <div class="tab-pane" id="brand-N">
                        </div>
                        <div class="tab-pane" id="brand-O">
                        </div>
                        <div class="tab-pane" id="brand-P">
                        </div>
                        <div class="tab-pane" id="brand-Q">
                        </div>
                        <div class="tab-pane" id="brand-R">
                        </div>
                        <div class="tab-pane" id="brand-S">
                        </div>
                        <div class="tab-pane" id="brand-T">
                        </div>
                        <div class="tab-pane" id="brand-U">
                        </div>
                        <div class="tab-pane" id="brand-V">
                        </div>
                        <div class="tab-pane" id="brand-W">
                        </div>
                        <div class="tab-pane" id="brand-X">
                        </div>
                        <div class="tab-pane" id="brand-Y">
                        </div>
                        <div class="tab-pane" id="brand-Z">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="filter-search-icon">
                        <a title="جست و جو" href="#" onclick="filtering()">جست و جو<i class="fa fa-search" style=""></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-content jump" id="product-tabs">
            <div class="tab-pane active" id="product-1">
                <div class="row">
                    @if (newWomen.Count() > 0)
                    {
                        foreach (var women in newWomen)
                        {
                            <div class="col-xl-3 col-md-6 col-lg-4 col-sm-6">
                                <div class="product-wrap-2 mb-25 scroll-zoom">
                                    <div class="product-img">
                                        <a href="product-details.html">
                                            <img class="default-img" src="~/Uploads/PerfumeImages/@women.Perfume_ImageIndex" alt="">
                                            <img class="hover-img" src="~/Uploads/PerfumeImages/@women.Perfume_ImageIndex" alt="">
                                        </a>
                                        <div class="product-action-2">
                                            <a title="Add To Cart" href="#"  onclick="showModal(@women.Perfume_ID,'../../Uploads/PerfumeImages/')"><i class="fa fa-shopping-cart"></i></a>
                                            <a title="Quick View" class="Quick_View" href="#" data-toggle="modal" onclick="showModal(@women.Perfume_ID,'../../Uploads/PerfumeImages/')"><i class="fa fa-eye"></i></a>
                                        </div>
                                    </div>
                                    <div class="product-content-2">
                                        <div class="title-price-wrap-2">
                                            <h3><a href="product-details.html">@women.Perfume_Name</a></h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
            <div class="tab-pane" id="product-2">
                <div class="row">
                    @if (newMen.Count() > 0)
                    {
                        foreach (var men in newMen)
                        {

                            <div class="col-xl-3 col-md-6 col-lg-4 col-sm-6">
                                <div class="product-wrap-2 mb-25 scroll-zoom">
                                    <div class="product-img">
                                        <a href="product-details.html">
                                            <img class="default-img" src="~/Uploads/PerfumeImages/@men.Perfume_ImageIndex" alt="">
                                            <img class="hover-img" src="~/Uploads/PerfumeImages/@men.Perfume_ImageIndex" alt="">
                                        </a>

                                        <div class="product-action-2">
                                            <a title="Add To Cart" href="#"  onclick="showModal(@men.Perfume_ID,'../../Uploads/PerfumeImages/')"><i class="fa fa-shopping-cart"></i></a>
                                            <a title="Quick View" class="Quick_View" href="#" data-toggle="modal" onclick="showModal(@men.Perfume_ID,'../../Uploads/PerfumeImages/')"><i class="fa fa-eye"></i></a>
                                        </div>
                                    </div>
                                    <div class="product-content-2">
                                        <div class="title-price-wrap-2">
                                            <h3><a href="product-details.html">@men.Perfume_Name</a></h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
            <div class="tab-pane" id="product-3">
                <div class="row">
                    @if (newUniSex.Count() > 0)
                    {
                        foreach (var newuni in newUniSex)
                        {
                            <div class="col-xl-3 col-md-6 col-lg-4 col-sm-6">
                                <div class="product-wrap-2 mb-25 scroll-zoom">
                                    <div class="product-img">
                                        <a href="product-details.html">
                                            <img class="default-img" src="~/Uploads/PerfumeImages/@newuni.Perfume_ImageIndex" alt="">
                                            <img class="hover-img" src="~/Uploads/PerfumeImages/@newuni.Perfume_ImageIndex" alt="">
                                        </a>

                                        <div class="product-action-2">
                                            <a title="Add To Cart" href="#" onclick="showModal(@newuni.Perfume_ID,'../../Uploads/PerfumeImages/')"><i class="fa fa-shopping-cart"></i></a>
                                            <a title="Quick View" class="Quick_View" href="#" data-toggle="modal" onclick="showModal(@newuni.Perfume_ID,'../../Uploads/PerfumeImages/')"><i class="fa fa-eye"></i></a>
                                        </div>
                                    </div>
                                    <div class="product-content-2">
                                        <div class="title-price-wrap-2">
                                            <h3><a href="product-details.html">@newuni.Perfume_Name</a></h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
            <div class="tab-pane" id="product-4">
                <div class="row">
                    @if (newSeason.Count() > 0)
                    {
                        foreach (var seasonPerfume in newSeason)
                        {
                            <div class="col-xl-3 col-md-6 col-lg-4 col-sm-6">
                                <div class="product-wrap-2 mb-25 scroll-zoom">
                                    <div class="product-img">
                                        <a href="product-details.html">
                                            <img class="default-img" src="~/Uploads/PerfumeImages/@seasonPerfume.Perfume_ImageIndex" alt="">
                                            <img class="hover-img" src="~/Uploads/PerfumeImages/@seasonPerfume.Perfume_ImageIndex" alt="">
                                        </a>

                                        <div class="product-action-2">
                                            <a title="Add To Cart" href="#" onclick="showModal(@seasonPerfume.Perfume_ID,'../../Uploads/PerfumeImages/')" ><i class="fa fa-shopping-cart"></i></a>
                                            <a title="Quick View" class="Quick_View" href="#" data-toggle="modal" onclick="showModal(@seasonPerfume.Perfume_ID,'../../Uploads/PerfumeImages/')"><i class="fa fa-eye"></i></a>
                                        </div>
                                    </div>
                                    <div class="product-content-2">
                                        <div class="title-price-wrap-2">
                                            <h3><a href="product-details.html">@seasonPerfume.Perfume_Name</a></h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
        <div>
            <div id="filterResult" style="display:none">
                <div class="row" id="filterResultRow">

                </div>
            </div>
            <div id="NoResult" style="display:none">
                محصولی یافت نشد!
            </div>
        </div>
    </div>

            </div>
<div class="blog-area pb-55">
    <div class="container">
        <div class="section-title text-center mb-55">
            <h2>برترین ها</h2>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="blog-wrap mb-30 scroll-zoom">
                    <div class="blog-img">
                        <a href="blog-details.html"><img src="Content/Images/best/chanel.png" alt=""></a>
                        <span class="purple">Lifestyle</span>
                    </div>
                    <div class="blog-content-wrap">
                        <div class="blog-content text-center">
                            <h3><a href="blog-details.html">Lorem ipsum dolor sit <br> amet consec.</a></h3>
                            <span>By Shop <a href="#">Admin</a></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="blog-wrap mb-30 scroll-zoom">
                    <div class="blog-img">
                        <a href="blog-details.html"><img src="Content/Images/best/creed.png" alt=""></a>
                        <span class="pink">Lifestyle</span>
                    </div>
                    <div class="blog-content-wrap">
                        <div class="blog-content text-center">
                            <h3><a href="blog-details.html">Lorem ipsum dolor sit <br> amet consec.</a></h3>
                            <span>By Shop <a href="#">Admin</a></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="blog-wrap mb-30 scroll-zoom">
                    <div class="blog-img">
                        <a href="blog-details.html"><img src="Content/Images/best/dior.png" alt=""></a>
                        <span class="purple">Lifestyle</span>
                    </div>
                    <div class="blog-content-wrap">
                        <div class="blog-content text-center">
                            <h3><a href="blog-details.html">Lorem ipsum dolor sit <br> amet consec.</a></h3>
                            <span>By Shop <a href="#">Admin</a></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@Html.Partial("Modal_Section")     
<script>
    function FindBrands(captal_letter,small_letter){
        $.ajax({
            type: "POST",
            traditional: true,
            async: false,
            cache: false,
            url: '/Brands/GetBrandsByLetter',
            context: document.body,
            data: { captal_letter: captal_letter, small_letter: small_letter  },
            success: function (result) {
                var str = '<div class="row brand-letter-item"><div class="col-md-12 col-sm-12 col-xs-12" ><ul>';
                $.each(result.filteredBrands, function (i, brand) {
                    str = str + '<li><a href="/Perfume/PerfumesBrand?brandId=' + brand.Value+'">' + brand.Text+'</a></li>'
                });
                str = str + '</ul></div></div>';
                document.getElementById("brand-" + captal_letter).innerHTML = str;
            },
            error: function (xhr) {
                //debugger;
                console.log(xhr.responseText);
                alert("Error has occurred..");
            }
        });
    }

    function filtering() {
        
        var gender = $('input[name=gender]:checked').val();
        var TemperOfPerfumes = [];
        $("input:checkbox[name=TemperOfPerfume]:checked").each(function () {
            TemperOfPerfumes.push($(this).val());
        });
        if (!TemperOfPerfumes.length > 0) TemperOfPerfumes = null;

        var OlfactionGroups = [];
        $("input:checkbox[name=OlfactionGroup]:checked").each(function () {
            OlfactionGroups.push($(this).val());
        });
        if (!OlfactionGroups.length > 0) OlfactionGroups = null;

        var seasons = [];
        $("input:checkbox[name=season]:checked").each(function () {
            seasons.push($(this).val());
        });
        if (!seasons.length > 0) seasons = null;

        $("#product-tabs").css("display", "none");
        $.ajax({
            type: "POST",
            traditional: true,
            async: false,
            cache: false,
            url: '/Perfume/PerfumeFilterring',
            context: document.body,
            data: { seasons: seasons, OlfactionGroups: OlfactionGroups, TemperOfPerfumes: TemperOfPerfumes, gender: gender },
            success: function (result) {
                if (result.perfumeIDs.length > 0) {alert("1")
                    
                    $("#filterResult").css("display", "block");
                    $("#NoResult").css("display", "none");
                    var str = "";
                    for (var i = 0; i < result.perfumeIDs.length; i++) {
                        str = str + ' <div class="col-xl-3 col-md-6 col-lg-4 col-sm-6"><div class="product-wrap-2 mb-25 scroll-zoom">' +
                            ' <div class="product-img" ><a href="product-details.html">' +
                            '<img class="default-img" src="Uploads/PerfumeImages/' + result.perfumeImages[i] + '" alt="">' +
                            '<img class="hover-img" src="Uploads/PerfumeImages/' + result.perfumeImages[i] + '" alt="">' +
                            '</a><div class="product-action-2" ><a title="Add To Cart" href="#" ><i class="fa fa - shopping - cart"></i></a>' +
                            '<a title="Quick View" class="Quick_View" href="#" data-toggle="modal" onclick="showModal(' + result.perfumeIDs[i] + ')"><i class="fa fa-eye"></i></a>' +
                            '</div></div ><div class="product-content-2"><div class="title-price-wrap-2"><h3><a href="product-details.html">' + result.perfumeNames[i] +
                            '</a></h3></div></div></div></div>';
                    }
                    document.getElementById("filterResultRow").innerHTML = str;
                }
                else {
                    $("#filterResult").css("display", "none");
                    $("#NoResult").css("display", "block");
                }



            },
            error: function (xhr) {
                //debugger;
                console.log(xhr.responseText);
                alert("Error has occurred..");
            }
        });
    }

    function changeHref() {
            var url = '@Url.Action("SearchResult", "Home")';
            var txtVal = $('#searchTerm').val();
            window.location.href = url + '/?searchTerm=' + txtVal;
        }
</script>